<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CYBER+ | Premium Electronics Store</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--  CDN links  -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root{--primary:#3b82f6;--primary-dark:#2563eb;--secondary:#10b981;--accent:#f59e0b;--dark:#1f2937;--darker:#111827;--light:#f3f4f6;--gray:#6b7280;--success:#10b981;--warning:#f59e0b;--error:#ef4444;}
        *{font-family:'Inter',system-ui,-apple-system,sans-serif;}
        body{background:linear-gradient(135deg,var(--darker) 0%,var(--dark) 100%);color:var(--light);line-height:1.6;}
        .glass-effect{background:rgba(255,255,255,.05);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);}
        .card{background:rgba(31,41,55,.8);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);transition:all .3s ease;}
        .card:hover{transform:translateY(-8px);box-shadow:0 20px 40px rgba(0,0,0,.3);border-color:rgba(59,130,246,.3);}
        .btn-primary{background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%);color:white;transition:all .3s;box-shadow:0 4px 15px rgba(59,130,246,.25);}
        .btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(59,130,246,.35);}
        .modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:1000;opacity:0;transition:opacity .3s;}
        .modal.active{display:flex;opacity:1;}
        .sidebar{position:fixed;top:0;right:-450px;width:450px;height:100%;background:var(--dark);transition:right .4s cubic-bezier(.4,0,.2,1);z-index:1000;overflow-y:auto;border-left:1px solid rgba(255,255,255,.1);}
        .sidebar.active{right:0;}
        .admin-panel{position:fixed;top:0;left:-100%;width:100%;height:100%;background:var(--darker);transition:left .4s cubic-bezier(.4,0,.2,1);z-index:1001;display:none;}
        .admin-panel.active{left:0;display:block;}
        .checkout-container{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--darker);z-index:1002;overflow-y:auto;transform:translateX(100%);transition:transform .5s cubic-bezier(.4,0,.2,1);}
        .checkout-container.active{transform:translateX(0);}
        .form-control{width:100%;padding:.875rem 1rem;background:rgba(31,41,55,.8);border:1px solid rgba(107,114,128,.3);border-radius:12px;color:white;transition:all .3s;}
        .form-control:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(59,130,246,.1);background:rgba(31,41,55,1);}
        .color-swatch{width:24px;height:24px;border-radius:50%;border:2px solid rgba(255,255,255,.3);cursor:pointer;margin:2px;display:inline-block;transition:all .3s;}
        .color-swatch.selected{border-color:var(--primary);box-shadow:0 0 0 3px rgba(59,130,246,.3);transform:scale(1.1);}
        .notification{position:fixed;top:20px;right:20px;padding:1rem 1.5rem;border-radius:12px;color:white;font-weight:500;z-index:9999;transform:translateX(400px);transition:transform .3s;}
        .notification.show{transform:translateX(0);}
        .notification.success{background:linear-gradient(135deg,#10b981 0%,#059669 100%);}
        .notification.error{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%);}
        .stats-card{background:linear-gradient(135deg,rgba(59,130,246,.1) 0%,rgba(16,185,129,.1) 100%);border:1px solid rgba(255,255,255,.1);}
    </style>
</head>
<body>

<!-- ================= HEADER ================= -->
<header class="sticky top-0 glass-effect shadow-lg z-40 border-b border-gray-700">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
        <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center"><i class="fas fa-microchip text-white text-lg"></i></div>
            <span class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">CYBER<span class="text-white">+</span></span>
        </div>

        <div class="hidden md:flex flex-1 mx-10 relative">
            <input id="search-input" type="text" placeholder="Search for electronics..." class="w-full px-6 py-3 pl-12 rounded-full glass-effect border border-gray-600 text-white placeholder-gray-400">
            <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            <div id="search-suggestions" class="search-suggestions hidden"></div>
        </div>

        <div class="flex items-center space-x-6">
            <button id="cart-button" class="relative p-3 glass-effect rounded-full hover:bg-opacity-20">
                <i class="fas fa-shopping-cart text-xl text-white"></i>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full text-xs w-6 h-6 flex items-center justify-center font-bold">0</span>
            </button>

            <div id="guest-menu" class="flex items-center space-x-4">
                <button id="login-btn" class="text-gray-300 hover:text-white">Login</button>
                <button id="register-btn" class="btn-primary px-4 py-2 rounded-full">Sign Up</button>
            </div>

            <div id="user-menu" class="hidden flex items-center space-x-4">
                <span id="user-name" class="text-white font-medium"></span>
                <button id="user-logout-btn" class="text-gray-300 hover:text-white"><i class="fas fa-sign-out-alt"></i></button>
            </div>

            <div id="admin-menu" class="hidden flex items-center space-x-4">
                <button id="admin-panel-btn" class="text-blue-400 hover:text-blue-300"><i class="fas fa-cog mr-2"></i>Admin Panel</button>
                <button id="admin-logout-btn" class="text-gray-300 hover:text-white"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </div>
    </div>
</header>

<!-- ================= HERO ================= -->
<section class="bg-gradient-to-r from-indigo-600 to-purple-600 py-20 text-white">
    <div class="container mx-auto px-4 text-center">
        <h1 class="text-5xl md:text-6xl font-bold mb-6">Welcome to <span class="text-yellow-300">CYBER+</span></h1>
        <p class="text-xl md:text-2xl text-gray-200 mb-8 max-w-3xl mx-auto">Discover the latest in technology with our premium collection of electronics, gadgets, and accessories.</p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <button onclick="scrollToSection('products')" class="btn-primary px-8 py-4 rounded-full font-semibold text-lg">Shop Now</button>
            <button onclick="scrollToSection('features')" class="glass-effect px-8 py-4 rounded-full font-semibold text-lg">Learn More</button>
        </div>
    </div>
</section>

<!-- ================= FEATURES ================= -->
<section id="features" class="py-20 bg-custom-dark">
    <div class="container mx-auto px-4">
        <h2 class="text-4xl font-bold mb-4 text-center">Why Choose CYBER+?</h2>
        <p class="text-xl text-gray-400 text-center mb-12">We deliver the best technology experience.</p>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <div class="feature-card p-8 rounded-2xl text-center"><div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-shipping-fast text-white text-2xl"></i></div><h3 class="text-xl font-semibold mb-2">Fast Shipping</h3><p class="text-gray-400">Free shipping on orders over $200.</p></div>
            <div class="feature-card p-8 rounded-2xl text-center"><div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-shield-alt text-white text-2xl"></i></div><h3 class="text-xl font-semibold mb-2">Warranty</h3><p class="text-gray-400">Comprehensive warranty & 24/7 support.</p></div>
            <div class="feature-card p-8 rounded-2xl text-center"><div class="w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-star text-white text-2xl"></i></div><h3 class="text-xl font-semibold mb-2">Premium Quality</h3><p class="text-gray-400">Only trusted brands and manufacturers.</p></div>
            <div class="feature-card p-8 rounded-2xl text-center"><div class="w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-headset text-white text-2xl"></i></div><h3 class="text-xl font-semibold mb-2">Expert Support</h3><p class="text-gray-400">Get help from tech experts anytime.</p></div>
        </div>
    </div>
</section>

<!-- ================= PRODUCTS ================= -->
<section id="products" class="py-20 bg-custom-darker">
    <div class="container mx-auto px-4">
        <h2 class="text-4xl font-bold mb-4 text-center">Our Premium Products</h2>
        <div class="flex flex-wrap gap-4 justify-center mb-12">
            <button class="filter-tag active" data-category="all">All Products</button>
            <button class="filter-tag" data-category="computers">Computers</button>
            <button class="filter-tag" data-category="smartphones">Smartphones</button>
            <button class="filter-tag" data-category="accessories">Accessories</button>
            <button class="filter-tag" data-category="gaming">Gaming</button>
            <button class="filter-tag" data-category="audio">Audio</button>
        </div>
        <div id="products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"></div>
    </div>
</section>

<!-- ================= CONTACT ================= -->
<section id="contact" class="py-20 bg-custom-dark">
    <div class="container mx-auto px-4">
        <h2 class="text-4xl font-bold mb-4 text-center">Get in Touch</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto">
            <div class="text-center p-8 glass-effect rounded-2xl"><div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-phone text-white text-2xl"></i></div><h3 class="text-xl font-semibold mb-2">Phone Support</h3><p class="text-gray-400">00961 71716499<br>00961 03123418</p></div>
            <div class="text-center p-8 glass-effect rounded-2xl"><div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-envelope text-white text-2xl"></i></div><h3 class="text-xl font-semibold mb-2">Email</h3><p class="text-gray-400">miled_ah@hotmail.com</p></div>
            <div class="text-center p-8 glass-effect rounded-2xl"><div class="w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-map-marker-alt text-white text-2xl"></i></div><h3 class="text-xl font-semibold mb-2">Visit Us</h3><p class="text-gray-400">Dbayeh-Meten-zoukelkharab street</p></div>
        </div>
    </div>
</section>

<!-- ================= FOOTER ================= -->
<footer class="bg-custom-darker py-12 border-t border-gray-800">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <div class="flex items-center space-x-3 mb-6">
                    <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center"><i class="fas fa-microchip text-white text-lg"></i></div>
                    <span class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">CYBER<span class="text-white">+</span></span>
                </div>
                <p class="text-gray-400 mb-4">Premium electronics and cutting-edge technology.</p>
                <div class="flex space-x-4"><a href="#" class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-blue-600 transition"><i class="fab fa-facebook-f text-white"></i></a><a href="#" class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-blue-400 transition"><i class="fab fa-twitter text-white"></i></a><a href="#" class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-pink-600 transition"><i class="fab fa-instagram text-white"></i></a></div>
            </div>
            <div><h3 class="text-lg font-semibold mb-4">Quick Links</h3><ul class="space-y-2"><li><a href="#home" class="text-gray-400 hover:text-white">Home</a></li><li><a href="#products" class="text-gray-400 hover:text-white">Products</a></li><li><a href="#features" class="text-gray-400 hover:text-white">Features</a></li><li><a href="#contact" class="text-gray-400 hover:text-white">Contact</a></li></ul></div>
            <div><h3 class="text-lg font-semibold mb-4">Categories</h3><ul class="space-y-2"><li><a href="#" class="text-gray-400 hover:text-white">Computers</a></li><li><a href="#" class="text-gray-400 hover:text-white">Smartphones</a></li><li><a href="#" class="text-gray-400 hover:text-white">Gaming</a></li><li><a href="#" class="text-gray-400 hover:text-white">Audio</a></li></ul></div>
            <div><h3 class="text-lg font-semibold mb-4">Support</h3><ul class="space-y-2"><li><a href="#" class="text-gray-400 hover:text-white">Help Center</a></li><li><a href="#" class="text-gray-400 hover:text-white">Warranty</a></li><li><a href="#" class="text-gray-400 hover:text-white">Returns</a></li><li><a href="#" class="text-gray-400 hover:text-white">71716499 - 03123418</a></li></ul></div>
        </div>
        <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">&copy; 2025 CYBER+. All rights reserved.</div>
    </div>
</footer>

<!-- ================= MODALS / SIDEBARS ================= -->
<div class="sidebar" id="cart-sidebar">
    <div class="p-6 border-b border-gray-700 flex justify-between items-center">
        <h3 class="text-2xl font-bold flex items-center"><i class="fas fa-shopping-cart mr-3 text-blue-500"></i>Shopping Cart</h3>
        <button id="close-cart" class="text-gray-400 hover:text-white"><i class="fas fa-times text-xl"></i></button>
    </div>
    <div id="cart-items" class="flex-grow overflow-auto p-6"></div>
    <div class="p-6 border-t border-gray-700">
        <div class="flex justify-between text-lg"><span>Subtotal:</span><span id="cart-subtotal">$0.00</span></div>
        <div class="flex justify-between text-sm text-gray-400"><span>Shipping:</span><span id="cart-shipping">$12.99</span></div>
        <div class="flex justify-between text-xl font-bold border-t border-gray-700 pt-4"><span>Total:</span><span id="cart-total">$0.00</span></div>
        <button id="checkout-btn" class="btn-primary w-full py-4 rounded-xl font-semibold text-lg mt-4">Proceed to Checkout</button>
    </div>
</div>

<!-- PRODUCT MODAL -->
<div class="modal" id="product-modal">
    <div class="modal-content max-w-4xl">
        <div class="flex justify-between items-start mb-6"><h3 id="modal-product-name" class="text-3xl font-bold"></h3><button id="close-modal" class="text-gray-400 hover:text-white"><i class="fas fa-times text-2xl"></i></button></div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div id="modal-product-image" class="glass-effect p-8 rounded-2xl flex items-center justify-center" style="min-height:400px;"></div>
            <div class="space-y-6">
                <div><div id="modal-product-price" class="text-3xl font-bold text-blue-500 mb-2"></div><div class="flex items-center text-yellow-500"><div id="modal-product-rating" class="flex"></div><span class="ml-2 text-gray-400">(<span id="modal-product-reviews">0</span> reviews)</span></div></div>
                <p id="modal-product-description" class="text-gray-300 text-lg"></p>
                <div id="modal-product-features" class="space-y-2"></div>
                <div id="modal-product-colors"></div>
                <div class="flex items-center gap-4"><span class="text-gray-400">Qty:</span>
                    <div class="flex border border-gray-600 rounded-lg"><button id="decrease-quantity" class="px-3 py-1"><i class="fas fa-minus"></i></button><input id="product-quantity" type="number" value="1" min="1" class="w-16 text-center bg-gray-800 border-l border-r border-gray-600"><button id="increase-quantity" class="px-3 py-1"><i class="fas fa-plus"></i></button></div>
                </div>
                <div class="flex gap-4"><button id="modal-add-to-cart" class="btn-primary flex-1 py-3 rounded-xl font-semibold">Add to Cart</button><button class="btn-secondary px-6 py-3 rounded-xl font-semibold"><i class="fas fa-heart mr-2"></i>Wishlist</button></div>
            </div>
        </div>
    </div>
</div>

<!-- LOGIN / REGISTER / ADMIN LOGIN -->
<div class="modal" id="login-modal"><div class="modal-content max-w-md"><div class="text-center mb-6"><h3 class="text-2xl font-bold">Welcome Back</h3><p class="text-gray-400">Sign in to your account</p></div>
    <form id="login-form" class="space-y-4"><input id="login-email" type="email" placeholder="Email" class="form-control" required><input id="login-password" type="password" placeholder="Password" class="form-control" required>
        <div class="flex gap-4"><button type="submit" class="btn-primary flex-1 py-2 rounded-xl">Sign In</button><button type="button" id="close-login" class="glass-effect px-4 py-2 rounded-xl">Cancel</button></div>
    </form>
</div></div>

<div class="modal" id="register-modal"><div class="modal-content max-w-md"><div class="text-center mb-6"><h3 class="text-2xl font-bold">Create Account</h3><p class="text-gray-400">Join CYBER+ today</p></div>
    <form id="register-form" class="space-y-4"><input id="register-name" type="text" placeholder="Full name" class="form-control" required><input id="register-email" type="email" placeholder="Email" class="form-control" required><input id="register-password" type="password" placeholder="Password" class="form-control" required>
        <div class="flex gap-4"><button type="submit" class="btn-secondary flex-1 py-2 rounded-xl">Create</button><button type="button" id="close-register" class="glass-effect px-4 py-2 rounded-xl">Cancel</button></div>
    </form>
</div></div>

<div class="modal" id="admin-login-modal"><div class="modal-content max-w-md"><div class="text-center mb-6"><h3 class="text-2xl font-bold">Admin Access</h3><p class="text-gray-400">Enter administrator credentials</p></div>
    <form id="admin-login-form" class="space-y-4"><input id="admin-username" type="text" placeholder="admin" class="form-control" required><input id="admin-password" type="password" placeholder="Password" class="form-control" required>
        <div class="flex gap-4"><button type="submit" class="btn-primary flex-1 py-2 rounded-xl">Login</button><button type="button" id="close-admin-login" class="glass-effect px-4 py-2 rounded-xl">Cancel</button></div>
    </form>
</div></div>

<!-- ADMIN PANEL -->
<div class="admin-panel" id="admin-panel">
    <div class="container mx-auto px-4 py-8">
        <div class="flex justify-between items-center mb-8"><h2 class="text-4xl font-bold">Admin Dashboard</h2><button id="close-admin-panel" class="text-gray-400 hover:text-white text-2xl"><i class="fas fa-times"></i></button></div>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="stats-card p-6 rounded-2xl"><div class="flex items-center justify-between"><div><p class="text-gray-400 text-sm">Total Products</p><p class="text-2xl font-bold" id="admin-total-products">0</p></div><div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center"><i class="fas fa-box text-white"></i></div></div></div>
            <div class="stats-card p-6 rounded-2xl"><div class="flex items-center justify-between"><div><p class="text-gray-400 text-sm">Total Orders</p><p class="text-2xl font-bold" id="admin-total-orders">0</p></div><div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center"><i class="fas fa-shopping-cart text-white"></i></div></div></div>
            <div class="stats-card p-6 rounded-2xl"><div class="flex items-center justify-between"><div><p class="text-gray-400 text-sm">Revenue</p><p class="text-2xl font-bold" id="admin-total-revenue">$0</p></div><div class="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center"><i class="fas fa-dollar-sign text-white"></i></div></div></div>
            <div class="stats-card p-6 rounded-2xl"><div class="flex items-center justify-between"><div><p class="text-gray-400 text-sm">Low Stock</p><p class="text-2xl font-bold" id="admin-low-stock">0</p></div><div class="w-12 h-12 bg-red-500 rounded-full flex items-center justify-center"><i class="fas fa-exclamation-triangle text-white"></i></div></div></div>
        </div>
        <div class="glass-effect p-6 rounded-2xl mb-8"><h3 class="text-xl font-bold mb-4">Sales Overview</h3><div class="chart-container"><canvas id="salesChart"></canvas></div></div>

        <div class="glass-effect p-6 rounded-2xl">
            <div class="flex justify-between items-center mb-6"><h3 class="text-xl font-bold">Product Management</h3><button id="add-product-btn" class="btn-primary px-6 py-3 rounded-xl"><i class="fas fa-plus mr-2"></i>Add New Product</button></div>
            <div id="add-product-form" class="bg-custom-dark p-6 rounded-xl" style="display:none;">
                <h4 class="text-lg font-bold mb-4">Product Details</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input id="product-name" type="text" placeholder="Product Name" class="form-control">
                    <input id="product-price" type="number" step="0.01" placeholder="Price ($)" class="form-control">
                    <select id="product-category" class="form-control"><option value="">Select Category</option><option value="computers">Computers</option><option value="smartphones">Smartphones</option><option value="accessories">Accessories</option><option value="gaming">Gaming</option><option value="audio">Audio</option></select>
                    <input id="product-stock" type="number" placeholder="Stock Quantity" class="form-control">
                    <textarea id="product-description" rows="3" placeholder="Description" class="form-control md:col-span-2"></textarea>
                    <input id="product-image-url" type="url" placeholder="Image URL" class="form-control md:col-span-2">
                    <div class="md:col-span-2" id="image-preview"></div>
                </div>
                <div class="md:col-span-2 mt-2"><label class="block text-sm font-medium mb-2">Colors (optional)</label><div id="colors-section"></div></div>
                <div class="mt-6 flex gap-4"><button id="save-product-btn" class="btn-primary px-6 py-3 rounded-xl"><i class="fas fa-save mr-2"></i>Save Product</button><button id="cancel-add-product" class="glass-effect px-6 py-3 rounded-xl">Cancel</button></div>
            </div>
            <div id="admin-products-list" class="space-y-4"></div>
        </div>
    </div>
</div>

<!-- CHECKOUT -->
<div id="checkout-container" class="checkout-container">
    <div class="container mx-auto px-4 py-8">
        <div class="flex justify-between items-center mb-8"><h2 class="text-3xl font-bold">Secure Checkout</h2><button id="close-checkout" class="text-gray-400 hover:text-white text-2xl"><i class="fas fa-times"></i></button></div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <div>
                <h3 class="text-2xl font-bold mb-6">Shipping Information</h3>
                <form id="checkout-form" class="space-y-4">
                    <div class="grid grid-cols-2 gap-4"><input id="checkout-firstname" type="text" placeholder="First Name" class="form-control" required><input id="checkout-lastname" type="text" placeholder="Last Name" class="form-control" required></div>
                    <input id="checkout-email" type="email" placeholder="Email" class="form-control" required><input id="checkout-phone" type="tel" placeholder="Phone" class="form-control" required><input id="checkout-address" type="text" placeholder="Address" class="form-control" required>
                    <div class="grid grid-cols-2 gap-4"><input id="checkout-city" type="text" placeholder="City" class="form-control" required><input id="checkout-zip" type="text" placeholder="ZIP" class="form-control" required></div>
                    <h3 class="text-2xl font-bold mt-8 mb-4">Payment Method</h3>
                    <label class="flex items-center p-4 glass-effect rounded-xl"><input type="radio" name="payment" value="card" checked class="mr-3"><i class="fas fa-credit-card text-blue-500 text-2xl mr-3"></i><div><p class="font-semibold">Credit Card</p><p class="text-sm text-gray-400">Visa, MasterCard, AmEx</p></div></label>
                    <div id="card-details" class="space-y-4"><input id="card-number" type="text" placeholder="1234 5678 9012 3456" class="form-control"><div class="grid grid-cols-2 gap-4"><input id="card-expiry" type="text" placeholder="MM/YY" class="form-control"><input id="card-cvv" type="text" placeholder="123" class="form-control"></div></div>
                </form>
            </div>
            <div>
                <h3 class="text-2xl font-bold mb-6">Order Summary</h3>
                <div class="glass-effect p-6 rounded-2xl">
                    <div id="checkout-items" class="space-y-4 mb-6"></div>
                    <div class="border-t border-gray-700 pt-4 space-y-2">
                        <div class="flex justify-between"><span>Subtotal:</span><span id="checkout-subtotal">$0.00</span></div>
                        <div class="flex justify-between"><span>Shipping:</span><span id="checkout-shipping">$12.99</span></div>
                        <div class="flex justify-between"><span>Tax:</span><span id="checkout-tax">$0.00</span></div>
                        <div class="flex justify-between font-bold text-xl border-t border-gray-700 pt-2"><span>Total:</span><span id="checkout-total">$0.00</span></div>
                    </div>
                    <button id="place-order-btn" class="btn-primary w-full py-4 rounded-xl font-semibold text-lg mt-6">Place Secure Order</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ================= JAVASCRIPT ================= -->
<script>
/* ===== GLOBALS ===== */
let products = [], cart = [], currentUser = null, isAdmin = false, editingProductId = null, currentProduct = null, selectedColor = null, colorFieldCount = 1;

/* ===== STORAGE ===== */
const loadProducts = () => { const s = localStorage.getItem('techhubpro_products'); products = s ? JSON.parse(s) : defaultProducts(); saveProducts(); };
const saveProducts = () => localStorage.setItem('techhubpro_products', JSON.stringify(products));
const loadCart = () => { const s = localStorage.getItem('techhubpro_cart'); cart = s ? JSON.parse(s) : []; updateCartDisplay(); };
const saveCart = () => localStorage.setItem('techhubpro_cart', JSON.stringify(cart));
const loadUser = () => { const s = localStorage.getItem('techhubpro_user'); if (s) { currentUser = JSON.parse(s); updateUserMenu(); } };
const saveUser = () => localStorage.setItem('techhubpro_user', JSON.stringify(currentUser));

/* ===== DEFAULT PRODUCTS ===== */
function defaultProducts() { return [
    { id: 1, name: "MacBook Pro 16-inch", price: 2499.99, category: "computers", description: "M2 Pro chip, 16 GB RAM, 512 GB SSD.", stock: 15, image: "https://images.unsplash.com/photo-1541807084-5c52b6b3adef?w=500", colors: [{name:"Space Gray",code:"#8E8E93",price:2499.99},{name:"Silver",code:"#E5E5EA",price:2499.99}], rating: 4.8, reviews: 124, features:["M2 Pro Chip","16GB RAM","512GB SSD","16-inch Retina"] },
    { id: 2, name: "iPhone 15 Pro Max", price: 1199.99, category: "smartphones", description: "A17 Pro chip, titanium design.", stock: 28, image: "https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=500", colors: [{name:"Natural Titanium",code:"#F5F5DC",price:1199.99},{name:"Blue Titanium",code:"#4682B4",price:1199.99}], rating: 4.7, reviews: 89, features:["A17 Pro","Pro Camera","Action Button"] },
    { id: 3, name: "Sony WH-1000XM5", price: 399.99, category: "audio", description: "Industry-leading noise cancelling.", stock: 42, image: "https://images.unsplash.com/photo-1484704849700-f032a568e944?w=500", colors: [{name:"Black",code:"#000000",price:399.99},{name:"Silver",code:"#C0C0C0",price:399.99}], rating: 4.6, reviews: 203, features:["Noise Cancelling","30-hour Battery"] },
    { id: 4, name: "Gaming Mechanical Keyboard", price: 159.99, category: "gaming", description: "RGB mechanical switches.", stock: 67, image: "https://images.unsplash.com/photo-1541140532154-b024d705b90a?w=500", colors: [{name:"Black",code:"#000000",price:159.99},{name:"White",code:"#FFFFFF",price:169.99}], rating: 4.5, reviews: 156, features:["Cherry MX","RGB Backlight"] },
    { id: 5, name: "4K Webcam", price: 199.99, category: "accessories", description: "Professional 4K webcam.", stock: 33, image: "https://images.unsplash.com/photo-1587829741301-dc798b83add3?w=500", colors: [], rating: 4.4, reviews: 78, features:["4K Resolution","Auto-focus"] },
    { id: 6, name: "Wireless Gaming Mouse", price: 129.99, category: "gaming", description: "High-precision wireless gaming mouse.", stock: 55, image: "https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=500", colors: [{name:"Black",code:"#000000",price:129.99},{name:"White",code:"#FFFFFF",price:129.99}], rating: 4.3, reviews: 92, features:["25,600 DPI","RGB Lighting"] },
    { id: 7, name: "Ultrawide Monitor 34-inch", price: 899.99, category: "computers", description: "34-inch curved 1440p 144 Hz.", stock: 19, image: "https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?w=500", colors: [], rating: 4.7, reviews: 67, features:["34-inch Curved","1440p 144Hz"] },
    { id: 8, name: "Wireless Earbuds Pro", price: 249.99, category: "audio", description: "Active noise cancelling earbuds.", stock: 76, image: "https://images.unsplash.com/photo-1590658165737-15a047b67cf3?w=500", colors: [{name:"White",code:"#FFFFFF",price:249.99},{name:"Black",code:"#000000",price:249.99}], rating: 4.5, reviews: 134, features:["ANC","Spatial Audio","6-hour Battery"] }
]; }

/* ===== UI ===== */
function displayProducts(filterCategory='all') {
    const grid = document.getElementById('products-grid');
    grid.innerHTML = '';
    const filtered = filterCategory === 'all' ? products : products.filter(p => p.category === filterCategory);
    filtered.forEach(p => {
        const card = document.createElement('div'); card.className = 'card rounded-2xl overflow-hidden shadow-lg';
        const price = p.colors?.length ? Math.min(...p.colors.map(c => c.price)) : p.price;
        card.innerHTML = `
            <div class="relative overflow-hidden bg-gray-800 h-64">
                ${p.image ? `<img src="${p.image}" class="w-full h-full object-cover">` : `<i class="fas fa-laptop text-6xl text-blue-500 flex items-center justify-center h-full"></i>`}
                <div class="absolute top-4 right-4"><span class="badge ${p.stock > 10 ? 'badge-success' : p.stock > 0 ? 'badge-warning' : 'badge-error'}">${p.stock > 10 ? 'In Stock' : p.stock > 0 ? 'Low Stock' : 'Out of Stock'}</span></div>
                ${p.colors?.length ? `<div class="absolute top-4 left-4"><span class="badge badge-success">Multiple Colors</span></div>` : ''}
            </div>
            <div class="p-6">
                <h3 class="text-xl font-semibold mb-2">${p.name}</h3>
                <div class="flex items-center mb-2">${generateStars(p.rating || 0)}<span class="ml-2 text-gray-400 text-sm">(${p.reviews || 0})</span></div>
                <div class="text-2xl font-bold text-blue-400 mb-2">$${price.toFixed(2)}${p.colors?.length ? '+' : ''}</div>
                <p class="text-gray-400 text-sm mb-4 line-clamp-2">${p.description}</p>
                <div class="flex gap-3">
                    <button class="view-product-btn flex-1 glass-effect px-4 py-3 rounded-xl text-blue-400 hover:text-white" data-id="${p.id}"><i class="fas fa-eye mr-2"></i>View Details</button>
                    <button class="add-to-cart-btn btn-primary px-6 py-3 rounded-xl" data-id="${p.id}" ${p.stock <= 0 ? 'disabled' : ''}>${p.stock <= 0 ? 'Sold Out' : 'Add to Cart'}</button>
                </div>
            </div>`;
        grid.appendChild(card);
    });
}
function generateStars(rating) {
    let html = ''; const full = Math.floor(rating); const half = rating % 1 !== 0;
    for (let i = 0; i < full; i++) html += '<i class="fas fa-star text-yellow-400"></i>';
    if (half) html += '<i class="fas fa-star-half-alt text-yellow-400"></i>';
    for (let i = 0; i < 5 - Math.ceil(rating); i++) html += '<i class="far fa-star text-yellow-400"></i>';
    return html;
}

/* ===== CART ===== */
function addToCart(productId, qty = 1, color = null) {
    const p = products.find(pr => pr.id === productId);
    if (!p || p.stock < qty) return showNotification('Insufficient stock', 'error');
    const key = `${productId}-${color ? color.name : 'default'}`;
    const existing = cart.find(c => c.cartKey === key);
    if (existing) {
        if (existing.quantity + qty > p.stock) return showNotification('Not enough stock', 'error');
        existing.quantity += qty;
    } else cart.push({ cartKey: key, productId, name: p.name, price: color ? color.price : p.price, quantity: qty, color: color ? color.name : null, image: p.image });
    updateCartDisplay(); saveCart(); showNotification(`${p.name} added to cart!`, 'success');
}
function updateCartDisplay() {
    const count = document.getElementById('cart-count');
    const items = document.getElementById('cart-items');
    const subtotal = cart.reduce((s, it) => s + it.price * it.quantity, 0);
    const shipping = subtotal >= 200 ? 0 : 12.99;
    const total = subtotal + shipping;
    if (count) count.textContent = cart.reduce((s, it) => s + it.quantity, 0);
    if (items) {
        if (!cart.length) items.innerHTML = `<div class="text-center text-gray-400 py-20"><i class="fas fa-shopping-cart text-6xl mb-4 opacity-50"></i><p class="text-lg">Your cart is empty</p></div>`;
        else items.innerHTML = cart.map(it => `
            <div class="flex items-center py-4 border-b border-gray-700">
                <div class="w-16 h-16 bg-gray-800 rounded-xl flex items-center justify-center mr-4"><img src="${it.image}" class="max-h-full max-w-full object-contain rounded-lg"></div>
                <div class="flex-grow"><h4 class="font-semibold">${it.name}</h4>${it.color ? `<p class="text-sm text-gray-400">${it.color}</p>` : ''}
                    <div class="flex items-center mt-1"><button class="cart-decrease px-2 text-gray-400" data-key="${it.cartKey}"><i class="fas fa-minus"></i></button><span class="px-3 font-medium">${it.quantity}</span><button class="cart-increase px-2 text-gray-400" data-key="${it.cartKey}"><i class="fas fa-plus"></i></button></div>
                </div>
                <span class="text-blue-400 font-semibold">$${(it.price * it.quantity).toFixed(2)}</span>
                <button class="cart-remove ml-4 text-gray-400 hover:text-red-500" data-key="${it.cartKey}"><i class="fas fa-trash-alt"></i></button>
            </div>`).join('');
    }
    document.getElementById('cart-subtotal') && (document.getElementById('cart-subtotal').textContent = '$' + subtotal.toFixed(2));
    document.getElementById('cart-shipping') && (document.getElementById('cart-shipping').textContent = shipping === 0 ? 'FREE' : '$' + shipping.toFixed(2));
    document.getElementById('cart-total') && (document.getElementById('cart-total').textContent = '$' + total.toFixed(2));
}

/* ===== USER / ADMIN ===== */
function updateUserMenu() {
    const guest = document.getElementById('guest-menu'), user = document.getElementById('user-menu'), admin = document.getElementById('admin-menu');
    guest.classList.toggle('hidden', !!currentUser || isAdmin);
    user.classList.toggle('hidden', !currentUser || isAdmin);
    admin.classList.toggle('hidden', !isAdmin);
    if (user) document.getElementById('user-name').textContent = currentUser?.name || '';
}
function openAdminPanel() {
    document.getElementById('admin-panel').classList.add('active');
    displayAdminProducts(); updateAdminStats(); initSalesChart();
}
function displayAdminProducts() {
    const list = document.getElementById('admin-products-list');
    list.innerHTML = products.map(p => `
        <div class="flex items-center justify-between p-4 glass-effect rounded-xl">
            <div class="flex items-center">
                <div class="w-16 h-16 bg-gray-800 rounded-xl flex items-center justify-center mr-4"><img src="${p.image}" class="max-h-full max-w-full object-contain rounded-lg"></div>
                <div><h4 class="font-semibold text-white">${p.name}</h4><p class="text-sm text-gray-400">$${p.price.toFixed(2)} • Stock: ${p.stock} • Category: ${p.category}</p></div>
            </div>
            <div class="flex gap-2">
                <button class="edit-product-btn text-blue-400 hover:text-blue-300 p-2 glass-effect rounded-lg" data-id="${p.id}"><i class="fas fa-edit" data-id="${p.id}"></i></button>
                <button class="delete-product-btn text-red-400 hover:text-red-300 p-2 glass-effect rounded-lg" data-id="${p.id}"><i class="fas fa-trash" data-id="${p.id}"></i></button>
            </div>
        </div>`).join('');
}
function updateAdminStats() {
    const orders = JSON.parse(localStorage.getItem('techhubpro_orders') || '[]');
    document.getElementById('admin-total-products') && (document.getElementById('admin-total-products').textContent = products.length);
    document.getElementById('admin-total-orders') && (document.getElementById('admin-total-orders').textContent = orders.length);
    document.getElementById('admin-total-revenue') && (document.getElementById('admin-total-revenue').textContent = '$' + orders.reduce((s, o) => s + o.total, 0).toFixed(2));
    document.getElementById('admin-low-stock') && (document.getElementById('admin-low-stock').textContent = products.filter(p => p.stock < 10).length);
}
function initSalesChart() {
    const ctx = document.getElementById('salesChart'); if (!ctx) return;
    if (window.salesChart) window.salesChart.destroy();
    const orders = JSON.parse(localStorage.getItem('techhubpro_orders') || '[]');
    const labels = []; const data = [];
    for (let i = 6; i >= 0; i--) {
        const d = new Date(); d.setDate(d.getDate() - i);
        labels.push(d.toLocaleDateString('en-US', { weekday: 'short' }));
        const key = d.toISOString().split('T')[0];
        data.push(orders.filter(o => o.date.startsWith(key)).reduce((s, o) => s + o.total, 0));
    }
    window.salesChart = new Chart(ctx, { type: 'line', data: { labels, datasets: [{ label: 'Daily Revenue', data, borderColor: '#3b82f6', fill: false, tension: 0.4 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { labels: { color: 'white' } } }, scales: { y: { ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,.1)'} }, x: { ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,.1)'} } } } });
}

/* ===== FORM UTILS ===== */
function addColorField() {
    const section = document.getElementById('colors-section'); const div = document.createElement('div'); div.className = 'flex gap-2 mb-2';
    div.innerHTML = `<input type="text" placeholder="Color name" class="form-control flex-1" id="color-name-${colorFieldCount}"><input type="color" class="w-12 h-12 rounded" id="color-code-${colorFieldCount}"><input type="number" step="0.01" placeholder="Price" class="form-control w-24" id="color-price-${colorFieldCount}"><button type="button" onclick="removeColorField(this)" class="bg-red-500 text-white px-3 py-2 rounded">-</button>`;
    section.appendChild(div); colorFieldCount++;
}
function removeColorField(btn) { btn.parentElement.remove(); }

/* ===== EVENTS ===== */
document.addEventListener('DOMContentLoaded', () => {
    loadProducts(); loadCart(); loadUser(); displayProducts(); updateCartDisplay(); updateAdminStats();
    /* header buttons */
    document.getElementById('cart-button')?.addEventListener('click', () => document.getElementById('cart-sidebar').classList.add('active'));
    document.getElementById('close-cart')?.addEventListener('click', () => document.getElementById('cart-sidebar').classList.remove('active'));
    document.getElementById('checkout-btn')?.addEventListener('click', () => { document.getElementById('cart-sidebar').classList.remove('active'); document.getElementById('checkout-container').classList.add('active'); });
    document.getElementById('close-checkout')?.addEventListener('click', () => document.getElementById('checkout-container').classList.remove('active'));
    /* login / register */
    document.getElementById('login-btn')?.addEventListener('click', () => document.getElementById('login-modal').classList.add('active'));
    document.getElementById('close-login')?.addEventListener('click', () => document.getElementById('login-modal').classList.remove('active'));
    document.getElementById('register-btn')?.addEventListener('click', () => document.getElementById('register-modal').classList.add('active'));
    document.getElementById('close-register')?.addEventListener('click', () => document.getElementById('register-modal').classList.remove('active'));
    document.getElementById('admin-panel-btn')?.addEventListener('click', openAdminPanel);
    document.getElementById('close-admin-panel')?.addEventListener('click', () => document.getElementById('admin-panel').classList.remove('active'));
    document.getElementById('add-product-btn')?.addEventListener('click', () => { document.getElementById('add-product-form').style.display = 'block'; colorFieldCount = 0; addColorField(); });
    document.getElementById('cancel-add-product')?.addEventListener('click', () => { document.getElementById('add-product-form').style.display = 'none'; });
    document.querySelectorAll('.filter-tag').forEach(btn => btn.addEventListener('click', e => { document.querySelectorAll('.filter-tag').forEach(b => b.classList.remove('active')); e.target.classList.add('active'); displayProducts(e.target.dataset.category); }));
    document.addEventListener('click', e => {
        if (e.target.closest('.modal') === e.target) e.target.classList.remove('active');
        /* product view / cart */
        if (e.target.closest('.view-product-btn')) openProductModal(Number(e.target.closest('.view-product-btn').dataset.id));
        if (e.target.closest('.add-to-cart-btn')) addToCart(Number(e.target.closest('.add-to-cart-btn').dataset.id));
        if (e.target.closest('.cart-increase')) { const k = e.target.closest('.cart-increase').dataset.key; const it = cart.find(i => i.cartKey === k); if (it) { const p = products.find(p => p.id === it.productId); if (it.quantity < p.stock) { it.quantity++; updateCartDisplay(); saveCart(); } } }
        if (e.target.closest('.cart-decrease')) { const k = e.target.closest('.cart-decrease').dataset.key; const it = cart.find(i => i.cartKey === k); if (it) { it.quantity--; if (it.quantity <= 0) cart = cart.filter(i => i.cartKey !== k); updateCartDisplay(); saveCart(); } }
        if (e.target.closest('.cart-remove')) { const k = e.target.closest('.cart-remove').dataset.key; cart = cart.filter(i => i.cartKey !== k); updateCartDisplay(); saveCart(); }
        /* admin edit / delete */
        if (e.target.closest('.delete-product-btn')) { const id = Number(e.target.closest('.delete-product-btn').dataset.id); if (confirm('Delete this product?')) { products = products.filter(p => p.id !== id); saveProducts(); displayProducts(); displayAdminProducts(); updateAdminStats(); } }
        if (e.target.closest('.edit-product-btn')) populateEditForm(Number(e.target.closest('.edit-product-btn').dataset.id));
    });
    document.getElementById('save-product-btn').replaceWith(document.getElementById('save-product-btn').cloneNode(true));
    document.getElementById('save-product-btn').addEventListener('click', saveProductHandler);
    document.getElementById('login-form')?.addEventListener('submit', e => { e.preventDefault(); currentUser = { email: document.getElementById('login-email').value, name: document.getElementById('login-email').value.split('@')[0] }; saveUser(); updateUserMenu(); document.getElementById('login-modal').classList.remove('active'); showNotification('Logged in', 'success'); });
    document.getElementById('register-form')?.addEventListener('submit', e => { e.preventDefault(); currentUser = { name: document.getElementById('register-name').value, email: document.getElementById('register-email').value }; saveUser(); updateUserMenu(); document.getElementById('register-modal').classList.remove('active'); showNotification('Account created', 'success'); });
    document.getElementById('user-logout-btn')?.addEventListener('click', () => { currentUser = null; saveUser(); updateUserMenu(); showNotification('Logged out', 'success'); });
    document.getElementById('admin-logout-btn')?.addEventListener('click', () => { isAdmin = false; updateUserMenu(); document.getElementById('admin-panel').classList.remove('active'); showNotification('Admin logged out', 'success'); });
    document.getElementById('admin-login-form')?.addEventListener('submit', e => { e.preventDefault(); if (document.getElementById('admin-username').value === 'admin' && document.getElementById('admin-password').value === 'techhub2024') { isAdmin = true; updateUserMenu(); document.getElementById('admin-login-modal').classList.remove('active'); openAdminPanel(); showNotification('Admin access granted', 'success'); } else showNotification('Invalid credentials', 'error'); });
    document.getElementById('place-order-btn')?.addEventListener('click', placeOrderHandler);
    document.getElementById('decrease-quantity')?.addEventListener('click', () => { const v = document.getElementById('product-quantity'); if (v.value > 1) v.value--; });
    document.getElementById('increase-quantity')?.addEventListener('click', () => { const v = document.getElementById('product-quantity'); const max = currentProduct ? currentProduct.stock : 1; if (parseInt(v.value) < max) v.value++; });
});

/* ===== PRODUCT MODAL ===== */
let currentProduct = null, selectedColor = null;
function openProductModal(id) {
    currentProduct = products.find(p => p.id === id);
    if (!currentProduct) return;
    selectedColor = currentProduct.colors?.[0] || null;
    document.getElementById('modal-product-name').textContent = currentProduct.name;
    document.getElementById('modal-product-price').textContent = '$' + (selectedColor ? selectedColor.price : currentProduct.price).toFixed(2);
    document.getElementById('modal-product-description').textContent = currentProduct.description;
    document.getElementById('modal-product-rating').innerHTML = generateStars(currentProduct.rating || 0);
    document.getElementById('modal-product-reviews').textContent = currentProduct.reviews || 0;
    const img = document.getElementById('modal-product-image');
    img.innerHTML = currentProduct.image ? `<img src="${currentProduct.image}" class="max-h-full max-w-full object-contain rounded-xl">` : `<i class="fas fa-laptop text-8xl text-blue-500"></i>`;
    const colors = document.getElementById('modal-product-colors');
    if (currentProduct.colors?.length) {
        colors.innerHTML = `<div class="space-y-3"><label class="font-semibold">Choose Color:</label><div class="flex gap-3">${currentProduct.colors.map((c,i)=>`<div class="color-swatch color-option ${i===0?'selected':''}" style="background:${c.code}" data-color-index="${i}" title="${c.name}"></div>`).join('')}</div></div>`;
    } else colors.innerHTML = '';
    document.getElementById('product-quantity').value = 1;
    document.getElementById('product-modal').classList.add('active');
}
document.addEventListener('click', e => {
    if (e.target.classList.contains('color-option')) {
        document.querySelectorAll('.color-option').forEach(c => c.classList.remove('selected'));
        e.target.classList.add('selected');
        const idx = Number(e.target.dataset.colorIndex);
        selectedColor = currentProduct.colors[idx];
        document.getElementById('modal-product-price').textContent = '$' + selectedColor.price.toFixed(2);
    }
});

/* ===== ADMIN EDIT ===== */
function populateEditForm(id) {
    const p = products.find(pr => pr.id === id); if (!p) return;
    editingProductId = id;
    document.getElementById('product-name').value = p.name;
    document.getElementById('product-price').value = p.price;
    document.getElementById('product-category').value = p.category;
    document.getElementById('product-stock').value = p.stock;
    document.getElementById('product-description').value = p.description;
    document.getElementById('product-image-url').value = p.image || '';
    document.getElementById('image-preview').innerHTML = p.image ? `<img src="${p.image}" class="max-w-32 max-h-32 object-cover rounded-xl">` : '';
    const section = document.getElementById('colors-section'); section.innerHTML = ''; colorFieldCount = 0;
    if (p.colors?.length) p.colors.forEach(c => { addColorField(); const i = colorFieldCount - 1; document.getElementById(`color-name-${i}`).value = c.name; document.getElementById(`color-code-${i}`).value = c.code; document.getElementById(`color-price-${i}`).value = c.price; });
    else addColorField();
    document.getElementById('add-product-form').style.display = 'block';
}

/* ===== SAVE / PLACE ORDER ===== */
function saveProductHandler() {
    const name = document.getElementById('product-name').value.trim();
    const price = parseFloat(document.getElementById('product-price').value);
    const category = document.getElementById('product-category').value;
    const stock = parseInt(document.getElementById('product-stock').value);
    const description = document.getElementById('product-description').value.trim();
    const image = document.getElementById('product-image-url').value.trim();
    if (!name || isNaN(price) || !category || isNaN(stock) || !description) return showNotification('Fill required fields', 'error');
    const colors = [];
    for (let i = 0; i < colorFieldCount; i++) {
        const n = document.getElementById(`color-name-${i}`);
        const c = document.getElementById(`color-code-${i}`);
        const p = document.getElementById(`color-price-${i}`);
        if (n?.value && c && p?.value) colors.push({ name: n.value, code: c.value, price: parseFloat(p.value) });
    }
    const data = { name, price, category, description, stock, image, colors, rating: 0, reviews: 0, features: [] };
    if (editingProductId) {
        const idx = products.findIndex(p => p.id === editingProductId);
        products[idx] = { ...products[idx], ...data };
        showNotification('Product updated', 'success');
    } else {
        products.push({ id: Date.now(), ...data }); showNotification('Product added', 'success');
    }
    saveProducts(); displayProducts(); displayAdminProducts(); updateAdminStats();
    editingProductId = null; document.getElementById('add-product-form').style.display = 'none';
}
function placeOrderHandler() {
    const form = document.getElementById('checkout-form');
    if (!form.checkValidity()) return form.reportValidity();
    for (const it of cart) {
        const p = products.find(pr => pr.id === it.productId);
        if (!p || p.stock < it.quantity) return showNotification('Stock issue', 'error');
    }
    cart.forEach(it => { const p = products.find(pr => pr.id === it.productId); p.stock -= it.quantity; });
    saveProducts(); displayProducts();
    const subtotal = cart.reduce((s, it) => s + it.price * it.quantity, 0);
    const shipping = subtotal >= 200 ? 0 : 12.99;
    const tax = subtotal * 0.08;
    const order = { id: Date.now(), items: [...cart], customer: { firstName: document.getElementById('checkout-firstname').value, lastName: document.getElementById('checkout-lastname').value, email: document.getElementById('checkout-email').value, phone: document.getElementById('checkout-phone').value, address: document.getElementById('checkout-address').value, city: document.getElementById('checkout-city').value, zip: document.getElementById('checkout-zip').value }, payment: document.querySelector('input[name="payment"]:checked')?.value, subtotal, shipping, tax, total: subtotal + shipping + tax, date: new Date().toISOString(), status: 'Processing' };
    const orders = JSON.parse(localStorage.getItem('techhubpro_orders') || '[]');
    orders.push(order); localStorage.setItem('techhubpro_orders', JSON.stringify(orders));
    cart = []; saveCart(); updateCartDisplay(); document.getElementById('checkout-container').classList.remove('active');
    showNotification(`Order #${order.id} placed successfully!`, 'success');
}

/* ===== UTILS ===== */
function showNotification(msg, type = 'success') {
    const n = document.createElement('div'); n.className = `notification ${type}`; n.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'} mr-2"></i>${msg}`;
    document.body.appendChild(n); setTimeout(() => n.classList.add('show'), 100);
    setTimeout(() => { n.classList.remove('show'); setTimeout(() => n.remove(), 300); }, 3000);
}
function scrollToSection(id) { document.getElementById(id).scrollIntoView({ behavior: 'smooth' }); }
</script>
</body>
</html>
